function removeBlankDiv(){$(".blankDiv").children().unwrap()}function titleCase(e){for(var t=e.toLowerCase().split(" "),n=0;n<t.length;n++)t[n]=t[n].charAt(0).toUpperCase()+t[n].substring(1)
return t.join(" ")}versionNumber={version:130}
var blankDiv=$('<div class="blankDiv">'),helpHtml="https://sirbdon.github.io/on-time-service/helpers.html",phoneMenuImages=blankDiv.load(helpHtml+" #helper-menu-imgs")
$(document).ready(function(){function e(){$(document).width()<=1033&&$('a[href="/products/"]').html("Other"),$(document).width()>1033&&$('a[href="/products/"]').html("Other Products & Services"),$(document).width()<=992&&($("#homeDetailsWatch").hide(),$(".homeDetails").css("text-align","center")),$(document).width()>992&&($("#homeDetailsWatch").show(),$(".homeDetails").css("text-align","left")),n()&&($("div.site-city-state").replaceWith(u),$("div.site-phone").replaceWith(B),$("#mobileMenuLink").addClass("phonex-menu").prepend(phoneMenuImages),$("#mobileMenuLink > a").remove(),$("#mobileMenuLink").prepend($('<a style="display:none">')),$("#footerBlock .sqs-block-content > p").addClass("phonex-footer")),n()||($("div.site-phone").replaceWith(t),$("#footerBlock .sqs-block-content > p").removeClass("phonex-footer")),removeBlankDiv()}var t=$("div.site-phone"),n=function(){return"block"===$("div.or-call").css("display")&&"block"===$("div.site-phone").css("display")},o=function(){var e=Boolean("1"===$("div.or-call").css("opacity")),t=Boolean("1"===$("div.site-phone").css("opacity")),o=n()
console.log("whitephone vars (3x): "+o+" "+e+" "+t),o&&e&&t&&(console.log("set opacity to 0"),$("div.or-call, div.site-phone").animate({opacity:"0"},400)),!o||e||t||(console.log("set opacity to 1"),$("div.or-call, div.site-phone").animate({opacity:"1"},400))},a=function(e){var t=document.createElement("a")
return t.href=e,t},s=function(e){return"undefined"!==e},r=function(){var e=a().pathname,t=e.split("/")
t.shift()
var n=t.filter(s),o=n.join("/")
return o},l=function(){for(i=0;i<document.forms.length;i++)document.forms[i].reset()
console.log("contact reset $this:"),console.log($(this)),$(".thank-you").fadeOut("fast"),$(".thank-you").remove(),$(this).find(".none1, .none0").hide(),$(this).hasClass("form-style-lower")?null:$(this).find('input[name="message"]').eq(0).prop("style").width="20%",$(this).find('input[name="message"]').prop("placeholder","Type here..."),$(this).find("input").prop("required",!1),$(this).fadeIn("fast"),$(this).find(".some0").fadeIn("fast"),o(),console.log("form RESET")},c=function(){return moment().tz("America/Los_Angeles").format("MMMM Do YYYY, h:mm:ss a (zz)")},d=""
$("head").append('<meta name="format-detection" content="telephone=no">')
var p='<div style="position:absolute;height:20%;width:30%;background-color:rgba(255, 0, 0, 0);display:hidden;left:50%;margin-left:-15%" id="service-outer"><div style="position:relative;height:100%;width:100%;background-color:rgba(255, 0, 0, 0);cursor:pointer;z-index:50;margin-top: 79%;" id="service-inner"></div></div>',m='<div style="position:absolute;height:20%;width:30%;background-color:rgba(255, 0, 0, 0);display:hidden;left:20%;margin-left:-15%" id="locations-outer"><div style="position:relative;height:100%;width:100%;background-color:rgba(255, 0, 0, 0);cursor:pointer;z-index:50;margin-top: 79%;" id="locations-inner"></div></div>'
$("div.image-wrapper").prepend(p,m),$("#service-inner").click(function(){window.location="http://ontimeserviceco.com/watch-services/"}),$("#locations-inner").click(function(){window.location="http://ontimeserviceco.com/locations/"})
var h='  <div class="site-address">    <form action="#" method="POST" class="form-style">      <div class="form-container">        <label for="message" class="some0 form-email" style="color:#111;">Contact Us: <span class="" style="font-weight:bold;text-decoration:underline;display:none;" class="here">HERE</span></label>        <input style="" class="some0" type="text" name="message" placeholder="Type here..." >        <button style="display:none" class="none0 form-next">Next</button>        <label for="contact-info" style="display:none; color:#111;" class="none1 form-email">Your Info:</label>        <input style="display:none;" class="none1 touch" type="text" name="contact-info" placeholder="Enter your phone number or e-mail...">        <input type="text" name="_gotcha" style="display:none">        <input type="hidden" name="_subject" value="New contact from On Time website!">        <input type="hidden" name="_cc" value="">        <button style="display:none;" class="none1 submit">Send</button>      </div>    </form>  </div>'
$('div.site-address:contains("info@ontimeserviceco.com")').replaceWith(h),$("div.site-address").addClass("phonex")
var u='<div class="site-city-state or-call">or:</div>'
$("div.site-city-state").replaceWith(u)
var f=""===r()?'<h3 class="text-align-center"></h3>':'<h4 class="text-align-center"></h4>',g='<div class="sqs-block html-block sqs-block-html" data-block-type="2"><div class="sqs-block-content"></div></div>'
"locations"===r()&&$("div#canvas div.sqs-layout.sqs-grid-12 div.row.sqs-row div.col.sqs-col-12").eq(1).prepend(g).parent().find("div.sqs-block-content").prepend('<p class="text-align-center">email placeholder</p>'),""===r()&&$("div.sqs-block-content h3.text-align-center").eq(1).before(h),""!==r()&&"about-us"!==r()&&$("div.sqs-block-content p.text-align-center").eq(1).before(h),$("div.site-address").eq(1).wrap(f).after("<br><div>or by e-mail:</div>"),$("div.site-address form").eq(1).addClass("form-style-lower")
var v='<h4 class="text-align-center"><strong><a target="_blank" href="mailto:info@ontimeserviceco.com">info@ontimeserviceco.com </a></strong></h4>'
""!==r()&&$("div.sqs-block-content h4.text-align-center").next().replaceWith(v),$('input[name="message"]').eq(0).focus(function(){o(),"40%"===$(this).prop("style").width||n()||($(this).animate({width:"20%"},0),$(this).animate({width:"40%"},100)),$(this).prop("placeholder","Enter your comments and requests here..."),$(this).parent().find(".none0").fadeIn("fast")}),$('input[name="message"]').eq(1).focus(function(){o(),$(this).prop("placeholder","Enter your comments and requests here..."),$(this).parent().find(".none0").fadeIn("fast")}),$("doesnt-work").click(function(e){console.log("contact us clicked"),o(),$(".some0").fadeOut("fast",function(){$(".none0").removeClass("input:invalid").fadeIn("fast"),$('input[name="message"]').focus()}),e.preventDefault()}),$(".form-next").click(function(e){if(""===$(this).parent().find('input[name="message"]').val().trim())return $(this).parent().find('input[name="message"]').prop("required",!0),e.preventDefault(),!1
console.log("next form clicked")
var t=$('label[for="message"]').width()
$(this).parent().find('label[for="contact-info"]').width(t),$(this).parent().find(".some0").fadeOut("fast"),$(this).parent().find(".none0").fadeOut("fast",function(){$(this).parent().find(".none1").fadeIn("fast"),$(this).parent().find(".touch").focus()}),e.preventDefault()}),""===r()&&$('section[data-content-field="main-content"]').remove()
var b="",y="",w="",k="",x="",_='<span class="thank-you site-address phonex" style="display:none; color:rgb(0,0,0);opacity:1;">Thanks! We\'ll be in touch soon.</span>',q={message:b,contact:y,page:r,time:d,_cc:w,_subject:k,_gotcha:x}
$('input[name="contact-info"]').keypress(function(e){13==e.keyCode&&(e.preventDefault(),$(this).parents("form").find(".submit").click())}),$("form .submit").on("click",$(this),function(){var e=n()?3e3:1e4,t=$(this),o=function(){return t.closest("form").removeAttr("id").removeAttr("_lpchecked")}
return console.log("submit timer: "+n()+e),""===$(this).parent().find('input[name="contact-info"]').val().trim()?($(this).parent().find('input[name="contact-info"]').prop("required",!0),!1):(q={message:$(this).parent().find('input[name="message"]').val(),contact:$(this).parent().find('input[name="contact-info"]').val(),page:r()?r():"Homepage",time:c()?c():"N/A",_cc:atob("YnBpenphQGdtYWlsLmNvbQ=="),_subject:$(this).parent().find('input[name="_subject"]').val(),_gotcha:$(this).parent().find('input[name="_gotcha"]').val()},q.message.startsWith("//")||q.contact.startsWith("//")?(console.log("test form NOT sent"),console.log("!message: "+q.message+"\n !contact info: "+q.contact)):(sendForm(q),console.log("form sent! data object:"),console.log(q)),$(this).parents("form").eq(0).before(_),console.log("thanks in, form coming out"),$(this).parents("form").eq(0).fadeOut("fast",function(){$(".thank-you").fadeIn(400,function(){$(".thank-you").animate({opacity:.3},4e3)
var t=function(){return l.apply(o(),[])}
window.setTimeout(t,e),console.log("data context: "),console.log(o())})}),!1)})
var C="http://ontimeserviceco.com/locations/"===window.location.href,W=("/locations/"===window.location.pathname,$("#canvas").find(".page-divider.top-divider")),D='<div id="workshopLoc" style="background-color:#dddddd">                    <h3 style="margin-top: 3%;margin-bottom: -3%;margin-left:auto;margin-right:auto;text-align:center;padding-top:10px;">                      Head Workshop Location:                    </h3>                    <p style="font-size:16px;margin-top: 3%;margin-bottom: -2%;margin-left:auto;margin-right:auto;text-align:center;">                      Walk-Ins Welcome - Free Parking Available                    </p>                    <p id="location-workshop" style="font-size:18px;margin-top: 3%;margin-bottom: -3%;margin-left:auto;margin-right:auto;text-align:center;">                      <a href="https://goo.gl/maps/8dY4czc1xY52" target="_blank" style="text-decoration:none;">                      <strong>Suite 212 (2nd Floor)</strong>                      </br>                      1899 Willingdon Ave                      </br>                      Burnaby, BC                      </br>                      V5C 5T1                      </a>                    </p>                    <p style="font-size:16px;margin-top: 3%;margin-bottom: -2%;margin-left:auto;margin-right:auto;text-align:center;">                      (click address for map)                    </p>                    </br>                    </div>',z='<p id="location-subtitle" style="font-size:18px;margin-top: 3%;margin-bottom: -3%;margin-left:auto;margin-right:auto;text-align:center;">                    Or click on your province below to find your nearest On Time Service counter located within <strong>The Hudson\'s Bay</strong>                  </p>'
C&&W.after(z).after(D),$("a.project div.content-fill").click(function(){C&&$("#location-subtitle").remove(),"/british-columbia/"!==$(this).parents("a.project").attr("href")&&$("#workshopLoc").remove()}),"about-us"===r()&&$("h1.page-title").css("margin-top","45%")
var T='<div class="phoneImgReplace container" style="text-align:center"><div class="row">  <div class="col-md-12">    <h1><strong>On Time \nWatch & Jewellery Service</strong></h1>  </div></div><div class="row">  <div class="col-md-12">    <p>EST. 1979</p>  </div></div><hr><br><div class="row">  <h2>Convenience, service and expertise</h2></div><br><div class="row">  <div class="col-md-4">    <img src="http://i.imgur.com/6uzy9Br.png">    <h3><strong>30</strong> Hudson\'s Bay<br>Locations</h3>    <br>  </div>  <div class="col-md-4">    <img src="http://i.imgur.com/hySpPzi.png">    <h3><strong>50+</strong> Watch & Jewellery<br>Services</h3>    <br>  </div>  <div class="col-md-4">    <img src="http://i.imgur.com/sNYiJ7U.png">    <h3><strong>200+</strong> Years of<br>Combined Experience</h3>    <br>  </div></div><br><br><div class="row" style="text-align:left">  <div class="col-md-4 pull-left hidden-xs hidden-sm">    <img id="homeDetailsWatch" src="http://i.imgur.com/7Er7Fhv.png" style="height:340px">  </div>  <div class="col-md-8 pull-right">    <p class="homeDetails"><strong>Complete watch servicing</strong>, from full rebuilds and technical revisions all the way down to battery replacement and ultrasonic cleaning.</p>  </div>  <div class="col-md-8 pull-right">    <p class="homeDetails"><strong>Anything you can imagine we can do with jewellery.</strong> From completely custom build rings, converting heirlooms into a modern brooch all the way to chain repairs, ring sizing, and chain soldering.<p>  </div>  <div class="col-md-8 pull-right">    <p class="homeDetails"><strong>A large variety of accessories and other services</strong> are also available. We\'re confident we can meet any of your watch and jewellery desires. Please reach out using the form at the top or at the email below.</p>  </div></div></div>'
""===r()&&$("#hero img").replaceWith(T)
var B='<div class="site-phone"><a href="tel:+16046885317,203" style="text-decoration:underline">Call Us</a><br><span style="text-transform:lowercase !important; text-decoration:none !important; margin-top:-10px;"><a>(ext. 203)</a></span></div>'
e(),$(window).resize(function(){e()}),$(".phonex-menu .pull-right").click(function(){$("#mobileNav").toggleClass("menu-open")})
var E=r(),O=E.replace(/-/g," "),j=titleCase(O)
$("#mobileMenuLink a img").removeClass("phonex-img-selected"),$('#mobileMenuLink a[href="/'+E+'/"] img').addClass("phonex-img-selected"),n()&&$("#upper-logo").after("<h1>"+j+"</h1>"),$("h2.project-title").css("font-size","20px !important"),$("head").after("<!--  \n /$$     /$$              /$$   /$$ /$$           /$$      \n|  $$   /$$/             | $$$ | $$|__/          | $$      \n \\  $$ /$$//$$$$$$       | $$$$| $$ /$$  /$$$$$$$| $$   /$$\n  \\  $$$$//$$__  $$      | $$ $$ $$| $$ /$$_____/| $$  /$$/\n   \\  $$/| $$  \\ $$      | $$  $$$$| $$| $$      | $$$$$$/ \n    | $$ | $$  | $$      | $$\\  $$$| $$| $$      | $$_  $$ \n    | $$ |  $$$$$$/      | $$ \\  $$| $$|  $$$$$$$| $$ \\  $$\n    |__/  \\______/       |__/  \\__/|__/ \\_______/|__/  __/\n                                                           \n                                                           \n                                                           -->")
new Date
!function(){var e=document.createElement("script"),t=document.getElementsByTagName("script")[0]
e.async=!0,e.src="https://embed.tawk.to/579c415fc0f4ac7924b2a2d4/default",e.charset="UTF-8",e.setAttribute("crossorigin","*"),t.parentNode.insertBefore(e,t)}()})
